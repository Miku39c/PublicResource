!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)r[n]=e[n];return r.target=r.currentTarget=t,r}function o(e){function t(t){return function(){var r=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],n=(e[t]||{}).getter;return n&&n(r,this)||r}}function r(t){return function(r){var o=this.xhr,i=this,u=e[t];if("on"===t.substring(0,2))i[t+"_"]=r,o[t]=function(u){u=n(u,i),e[t]&&e[t].call(i,o,u)||r.call(i,u)};else{var s=(u||{}).setter;r=s&&s(r,i)||r,this[t+"_"]=r;try{o[t]=r}catch(e){}}}}function o(t){return function(){var r=[].slice.call(arguments);if(e[t]){var n=e[t].call(this,r,this.xhr);if(n)return n}return this.xhr[t].apply(this.xhr,r)}}return window[s]=window[s]||XMLHttpRequest,XMLHttpRequest=function(){var e=new window[s];for(var n in e){var i="";try{i=u(e[n])}catch(e){}"function"===i?this[n]=o(n):Object.defineProperty(this,n,{get:t(n),set:r(n),enumerable:!0})}var a=this;e.getProxy=function(){return a},this.xhr=e},window[s]}function i(){window[s]&&(XMLHttpRequest=window[s]),window[s]=void 0}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.configEvent=n,t.hook=o,t.unHook=i;var s="_rxhr"},function(e,t,r){"use strict";function n(e){if(d)throw"Proxy already exists";return d=new f(e)}function o(){d=null,(0,l.unHook)()}function i(e){return e.replace(/^\s+|\s+$/g,"")}function u(e){return e.watcher||(e.watcher=document.createElement("a"))}function s(e,t){var r=e.getProxy(),n="on"+t+"_",o=(0,l.configEvent)({type:t},r);r[n]&&r[n](o);var i;"function"==typeof Event?i=new Event(t,{bubbles:!1}):(i=document.createEvent("Event"),i.initEvent(t,!1,!0)),u(e).dispatchEvent(i)}function a(e){this.xhr=e,this.xhrProxy=e.getProxy()}function c(e){function t(e){a.call(this,e)}return t[w]=Object.create(a[w]),t[w].next=e,t}function f(e){function t(e,t){var r=new P(e);if(!f)return r.resolve();var n={response:t.response,status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce(function(e,t){if(""===t)return e;var r=t.split(":");return e[r.shift()]=i(r.join(":")),e},{})};f(n,r)}function r(e,t,r){var n=new j(e),o={config:e.config,error:r};d?d(o,n):n.next(o)}function n(){return!0}function o(e,t){return r(e,this,t),!0}function a(e,r){return 4===e.readyState&&0!==e.status?t(e,r):4!==e.readyState&&s(e,b),!0}var c=e.onRequest,f=e.onResponse,d=e.onError;return(0,l.hook)({onload:n,onloadend:n,onerror:o,ontimeout:o,onabort:o,onreadystatechange:function(e){return a(e,this)},open:function(e,t){var n=this,o=t.config={headers:{}};o.method=e[0],o.url=e[1],o.async=e[2],o.user=e[3],o.password=e[4],o.xhr=t;var i="on"+b;t[i]||(t[i]=function(){return a(t,n)});var u=function(e){r(t,n,(0,l.configEvent)(e,n))};if([x,v,g].forEach(function(e){var r="on"+e;t[r]||(t[r]=u)}),c)return!0},send:function(e,t){var r=t.config;try{r.withCredentials=t.withCredentials}catch(e){console.log("Error 1: "+e),console.log("xhr 1: "+t)}if(r.body=e[0],c){var n=function(){c(r,new m(t))};return!1===r.async?n():setTimeout(n),!0}},setRequestHeader:function(e,t){return t.config.headers[e[0].toLowerCase()]=e[1],!0},addEventListener:function(e,t){var r=this;if(-1!==h.indexOf(e[0])){var n=e[1];return u(t).addEventListener(e[0],function(t){var o=(0,l.configEvent)(t,r);o.type=e[0],o.isTrusted=!0,n.call(r,o)}),!0}},getAllResponseHeaders:function(e,t){var r=t.resHeader;if(r){var n="";for(var o in r)n+=o+": "+r[o]+"\r\n";return n}},getResponseHeader:function(e,t){var r=t.resHeader;if(r)return r[(e[0]||"").toLowerCase()]}})}Object.defineProperty(t,"__esModule",{value:!0}),t.proxy=n,t.unProxy=o;var d,l=r(0),h=["load","loadend","timeout","error","readystatechange","abort"],p=h[0],y=h[1],v=h[2],x=h[3],b=h[4],g=h[5],w="prototype";a[w]=Object.create({resolve:function(e){var t=this.xhrProxy,r=this.xhr;t.readyState=4,r.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,s(r,b),s(r,p),s(r,y)},reject:function(e){this.xhrProxy.status=0,s(this.xhr,e.type),s(this.xhr,y)}});var m=c(function(e){var t=this.xhr;e=e||t.config,0!=t.readyState&&1!=t.readyState||(t.withCredentials=e.withCredentials),t.open(e.method,e.url,!1!==e.async,e.user,e.password);for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);try{t.send(e.body)}catch(e){console.log("Error 2: "+e),console.log("xhr 2: "+t)}}),P=c(function(e){this.resolve(e)}),j=c(function(e){this.reject(e)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.defineProperty(t,"hook",{enumerable:!0,get:function(){return n.hook}}),Object.defineProperty(t,"unHook",{enumerable:!0,get:function(){return n.unHook}});var o=r(1);Object.defineProperty(t,"proxy",{enumerable:!0,get:function(){return o.proxy}}),Object.defineProperty(t,"unProxy",{enumerable:!0,get:function(){return o.unProxy}})}])});
//# sourceMappingURL=ajaxhook.umd.min.js.map